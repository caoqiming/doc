# exec

在 Shell 脚本中，exec 命令被用于执行一个 shell 命令并替换当前的进程。执行 exec 命令后的脚本或命令将接管原有的 Shell 进程，但进程的 PID 保持不变。exec 系统调用并没有创建新的进程，只是替换了原来进程上下文的内容。原进程的代码段，数据段，堆栈段被新的进程所代替。新进程将继承原始脚本的文件描述符和环境变量。。
**原 Shell 中 exec 之后的命令将不会被执行**，但是：

- 如果 exec 命令执行失败，脚本将继续执行后续的命令.
- 当 exec 命令来对文件描述符操作的时候，就不会替换 shell，而且操作完成后，还会继续执行接下来的命令。

## 应用场景

- 更改 Shell 的输入/输出/错误重定向： exec 命令可以用来改变标准输入、输出或错误的文件描述符。例如，我们可以使用 `exec > outfile` 将所有后续命令的输出重定向到名为 "outfile" 的文件。

  ```bash
  exec 2> >(tee -a "./stderr.log")
  exec 1> >(tee -a "./stdout.log")
  ```

- 替换当前的 Shell 进程：如果你有一个可执行文件，并且你想在当前 shell 进程中执行它，而不是创建一个新的进程，你可以使用 exec 命令。
- 在脚本中执行其他程序：如果你在 shell 脚本中，最后一个要执行的动作是启动另一个程序，你可能会希望直接用那个程序替换掉当前的 shell，这时就可以使用 exec 命令。
