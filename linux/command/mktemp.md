# mktmp

直接创建临时文件，尤其在 `/tmp` 目录里面，往往会导致安全问题。 `/tmp` 目录是所有人可读写的。
直接运行 `mktemp` 命令，就能生成一个临时文件。生成的临时文件名是随机的，而且权限是只有用户本人可读写。
Bash 脚本使用 mktemp 命令的用法如下。

```bash
# 保证脚本退出时临时文件被删除
trap 'rm -f "$TMPFILE"' EXIT
# 为了确保临时文件创建成功，mktemp命令后面最好使用 OR 运算符（||），指定创建失败时退出脚本
TMPFILE=$(mktemp) || exit 1
echo "Our temp file is $TMPFILE"
```

- `-d` 参数可以创建一个临时目录
- `-p` 参数可以指定临时文件所在的目录。默认是使用`$TMPDIR`环境变量指定的目录，如果这个变量没设置，那么使用`/tmp`目录。
- `-t`参数可以指定临时文件的文件名模板，模板的末尾必须至少包含三个连续的 X 字符，表示随机字符，建议至少使用六个 X。默认的文件名模板是 tmp.后接十个随机字符。
